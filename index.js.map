{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_KEY = '49461257-d92cdcbbc0ac75fcae3d36a6d';\r\nconst BASE_URL = 'https://pixabay.com/api/';\r\n\r\nexport async function fetchImages(inputValue, page) {\r\n  const { data } = await axios(BASE_URL, {\r\n    params: {\r\n      key: API_KEY,\r\n      q: inputValue,\r\n      image_type: 'photo',\r\n      orientation: 'horizontal',\r\n      safesearch: true,\r\n      page,\r\n      per_page: 15,\r\n    },\r\n  });\r\n\r\n  return data;\r\n}","import iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\nimport SimpleLightbox from 'simplelightbox';\r\nimport 'simplelightbox/dist/simple-lightbox.min.css';\r\n\r\nconst loader = document.querySelector('.loader');\r\nconst loadMoreBtn = document.querySelector('.load-more-button');\r\nconst lightbox = new SimpleLightbox('.gallery a', {\r\n  captionsData: 'alt',\r\n});\r\n\r\nexport function createMarkup(hits, gallery) {\r\n  const markup = hits\r\n    .map(\r\n      hit => `\r\n    <a class=\"gallery-item\" href=\"${hit.largeImageURL}\">\r\n      <img src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" loading=\"lazy\" />\r\n      <div class=\"info\">\r\n        <p><span>Likes:</span> ${hit.likes}</p>\r\n        <p><span>Views:</span> ${hit.views}</p>\r\n        <p><span>Comments:</span> ${hit.comments}</p>\r\n        <p><span>Downloads:</span> ${hit.downloads}</p>\r\n      </div>\r\n    </a>\r\n  `\r\n    )\r\n    .join('');\r\n\r\n  gallery.insertAdjacentHTML('beforeend', markup);\r\n\r\n  lightbox.refresh();\r\n}\r\n\r\nexport function clearGallery(gallery) {\r\n  gallery.innerHTML = '';\r\n}\r\n\r\nexport function showErrorMessage(message) {\r\n  iziToast.error({\r\n    title: 'Error',\r\n    message,\r\n  });\r\n}\r\n\r\nexport function showLoadingIndicator() {\r\n  loader.classList.remove('visually-hidden');\r\n}\r\n\r\nexport function hideLoadingIndicator() {\r\n  loader.classList.add('visually-hidden');\r\n}\r\n\r\nexport function showLoadMoreBtn() {\r\n  loadMoreBtn.classList.remove('visually-hidden');\r\n}\r\n\r\nexport function hideLoadMoreBtn() {\r\n  loadMoreBtn.classList.add('visually-hidden');\r\n}","import iziToast from 'izitoast';\r\nimport { fetchImages } from './js/pixabay-api.js';\r\nimport {\r\n  showErrorMessage,\r\n  createMarkup,\r\n  clearGallery,\r\n  showLoadingIndicator,\r\n  hideLoadingIndicator,\r\n  showLoadMoreBtn,\r\n  hideLoadMoreBtn,\r\n} from './js/render-functions.js';\r\n\r\nconst searchform = document.querySelector('.form');\r\nconst gallery = document.querySelector('.gallery');\r\nconst loadMoreBtn = document.querySelector('.load-more-button');\r\n\r\nsearchform.addEventListener('submit', toSearch);\r\nloadMoreBtn.addEventListener('click', toLoadMore);\r\n\r\nlet page = 1;\r\nlet searchQuery = null;\r\n\r\nasync function toSearch(event) {\r\n  event.preventDefault();\r\n\r\n  hideLoadMoreBtn();\r\n\r\n  clearGallery(gallery);\r\n\r\n  const inputValue = event.target.elements['search-text'].value.trim();\r\n  searchQuery = inputValue;\r\n\r\n  if (!inputValue) {\r\n    showErrorMessage('You forgot important data');\r\n    return;\r\n  }\r\n\r\n  page = 1;\r\n\r\n  showLoadingIndicator();\r\n\r\n  try {\r\n    const { hits, totalHits } = await fetchImages(inputValue, page);\r\n    if (!hits.length) {\r\n      showErrorMessage(\r\n        'Sorry, there are no images matching your search query. Please try again!'\r\n      );\r\n    }\r\n    createMarkup(hits, gallery);\r\n\r\n    if (gallery.querySelectorAll('a').length < totalHits) {\r\n      showLoadMoreBtn();\r\n    }\r\n  } catch (error) {\r\n    showErrorMessage('Failed to load images. Please try again!');\r\n  } finally {\r\n    hideLoadingIndicator();\r\n  }\r\n}\r\n\r\nasync function toLoadMore() {\r\n  hideLoadMoreBtn();\r\n  showLoadingIndicator();\r\n  page += 1;\r\n\r\n  try {\r\n    const { hits, totalHits } = await fetchImages(searchQuery, page);\r\n    createMarkup(hits, gallery);\r\n\r\n    if (gallery.querySelectorAll('a').length < totalHits) {\r\n      showLoadMoreBtn();\r\n    } else {\r\n      showErrorMessage(\r\n        \"We're sorry, but you've reached the end of search results.\"\r\n      );\r\n    }\r\n\r\n    const card = document.querySelector('.gallery-item');\r\n    const cardHeight = card.getBoundingClientRect().height;\r\n    window.scrollBy({\r\n      left: 0,\r\n      top: cardHeight * 2,\r\n      behavior: 'smooth',\r\n    });\r\n  } catch (error) {\r\n    showErrorMessage('Failed to load images. Please try again!');\r\n  } finally {\r\n    hideLoadingIndicator();\r\n  }\r\n}"],"names":["API_KEY","BASE_URL","fetchImages","inputValue","page","data","axios","loader","loadMoreBtn","lightbox","SimpleLightbox","createMarkup","hits","gallery","markup","hit","clearGallery","showErrorMessage","message","iziToast","showLoadingIndicator","hideLoadingIndicator","showLoadMoreBtn","hideLoadMoreBtn","searchform","toSearch","toLoadMore","searchQuery","event","totalHits","cardHeight"],"mappings":"wyBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAYC,EAAM,CAClD,KAAM,CAAE,KAAAC,CAAI,EAAK,MAAMC,EAAML,EAAU,CACrC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAU,EACX,CACL,CAAG,EAED,OAAOC,CACT,CCdA,MAAME,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,mBAAmB,EACxDC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,KAChB,CAAC,EAEM,SAASC,EAAaC,EAAMC,EAAS,CAC1C,MAAMC,EAASF,EACZ,IACCG,GAAO;AAAA,oCACuBA,EAAI,aAAa;AAAA,kBACnCA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA,iCAEnBA,EAAI,KAAK;AAAA,iCACTA,EAAI,KAAK;AAAA,oCACNA,EAAI,QAAQ;AAAA,qCACXA,EAAI,SAAS;AAAA;AAAA;AAAA,GAI7C,EACA,KAAK,EAAE,EAEVF,EAAQ,mBAAmB,YAAaC,CAAM,EAE9CL,EAAS,QAAO,CAClB,CAEO,SAASO,EAAaH,EAAS,CACpCA,EAAQ,UAAY,EACtB,CAEO,SAASI,EAAiBC,EAAS,CACxCC,EAAS,MAAM,CACb,MAAO,QACP,QAAAD,CACJ,CAAG,CACH,CAEO,SAASE,GAAuB,CACrCb,EAAO,UAAU,OAAO,iBAAiB,CAC3C,CAEO,SAASc,GAAuB,CACrCd,EAAO,UAAU,IAAI,iBAAiB,CACxC,CAEO,SAASe,GAAkB,CAChCd,EAAY,UAAU,OAAO,iBAAiB,CAChD,CAEO,SAASe,GAAkB,CAChCf,EAAY,UAAU,IAAI,iBAAiB,CAC7C,CC9CA,MAAMgB,EAAa,SAAS,cAAc,OAAO,EAC3CX,EAAU,SAAS,cAAc,UAAU,EAC3CL,EAAc,SAAS,cAAc,mBAAmB,EAE9DgB,EAAW,iBAAiB,SAAUC,CAAQ,EAC9CjB,EAAY,iBAAiB,QAASkB,CAAU,EAEhD,IAAItB,EAAO,EACPuB,EAAc,KAElB,eAAeF,EAASG,EAAO,CAC7BA,EAAM,eAAc,EAEpBL,IAEAP,EAAaH,CAAO,EAEpB,MAAMV,EAAayB,EAAM,OAAO,SAAS,aAAa,EAAE,MAAM,OAG9D,GAFAD,EAAcxB,EAEV,CAACA,EAAY,CACfc,EAAiB,2BAA2B,EAC5C,MACD,CAEDb,EAAO,EAEPgB,IAEA,GAAI,CACF,KAAM,CAAE,KAAAR,EAAM,UAAAiB,CAAW,EAAG,MAAM3B,EAAYC,EAAYC,CAAI,EACzDQ,EAAK,QACRK,EACE,0EACR,EAEIN,EAAaC,EAAMC,CAAO,EAEtBA,EAAQ,iBAAiB,GAAG,EAAE,OAASgB,GACzCP,GAEH,MAAe,CACdL,EAAiB,0CAA0C,CAC/D,QAAY,CACRI,GACD,CACH,CAEA,eAAeK,GAAa,CAC1BH,IACAH,IACAhB,GAAQ,EAER,GAAI,CACF,KAAM,CAAE,KAAAQ,EAAM,UAAAiB,CAAW,EAAG,MAAM3B,EAAYyB,EAAavB,CAAI,EAC/DO,EAAaC,EAAMC,CAAO,EAEtBA,EAAQ,iBAAiB,GAAG,EAAE,OAASgB,EACzCP,IAEAL,EACE,4DACR,EAII,MAAMa,EADO,SAAS,cAAc,eAAe,EAC3B,sBAAqB,EAAG,OAChD,OAAO,SAAS,CACd,KAAM,EACN,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,CACF,MAAe,CACdb,EAAiB,0CAA0C,CAC/D,QAAY,CACRI,GACD,CACH"}